<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>NexMotion: Axis_Motion_Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="NexCOBOT_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NexMotion
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">Open Robots &amp; Machines [WIP]</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___axis___motion___control.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Axis_Motion_Control<div class="ingroups"><a class="el" href="group___axis___a_p_i.html">Axis_API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Axis Motion Control Functions.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Axis_Motion_Control:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___axis___motion___control.png" border="0" alt="" usemap="#group______axis______motion______control"/>
<map name="group______axis______motion______control" id="group______axis______motion______control">
<area shape="rect" id="node2" href="group___axis___a_p_i.html" title="Axis APIs. " alt="" coords="5,5,83,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga551822a510ca3810e0924c44a7bc4049"><td class="memItemLeft" align="right" valign="top"><a class="el" href="nex__type_8h.html#acbde565254657d16523ae08fccf48f88">RTN_ERR</a> <a class="el" href="_nex_motion_8h.html#a22dcd2b341c29891dff9485b33e4bc4b">FNTYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___axis___motion___control.html#ga551822a510ca3810e0924c44a7bc4049">NMC_AxisPtp</a> (<a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a> DevID, <a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a> AxisIndex, <a class="el" href="nex__type_8h.html#a1f25e16eef935edec602388b0ca299d9">F64_T</a> TargetPos, <a class="el" href="nex__type_8h.html#a4f4dfa4a01521e3442b8afdbaf03b1bc">_opt_null_</a> const <a class="el" href="nex__type_8h.html#a1f25e16eef935edec602388b0ca299d9">F64_T</a> *PMaxVel)</td></tr>
<tr class="memdesc:ga551822a510ca3810e0924c44a7bc4049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute Point-To-Point Motion according with target position.  <a href="#ga551822a510ca3810e0924c44a7bc4049">More...</a><br /></td></tr>
<tr class="separator:ga551822a510ca3810e0924c44a7bc4049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e3f6d20ccba8a38390e2fa0d5cce921"><td class="memItemLeft" align="right" valign="top"><a class="el" href="nex__type_8h.html#acbde565254657d16523ae08fccf48f88">RTN_ERR</a> <a class="el" href="_nex_motion_8h.html#a22dcd2b341c29891dff9485b33e4bc4b">FNTYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___axis___motion___control.html#ga3e3f6d20ccba8a38390e2fa0d5cce921">NMC_AxisJog</a> (<a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a> DevID, <a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a> AxisIndex, <a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a> Dir, <a class="el" href="nex__type_8h.html#a4f4dfa4a01521e3442b8afdbaf03b1bc">_opt_null_</a> const <a class="el" href="nex__type_8h.html#a1f25e16eef935edec602388b0ca299d9">F64_T</a> *PMaxVel)</td></tr>
<tr class="memdesc:ga3e3f6d20ccba8a38390e2fa0d5cce921"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute Point-To-Point Motion according with target (or default) velocity.  <a href="#ga3e3f6d20ccba8a38390e2fa0d5cce921">More...</a><br /></td></tr>
<tr class="separator:ga3e3f6d20ccba8a38390e2fa0d5cce921"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Axis Motion Control Functions. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga3e3f6d20ccba8a38390e2fa0d5cce921"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="nex__type_8h.html#acbde565254657d16523ae08fccf48f88">RTN_ERR</a> <a class="el" href="_nex_motion_8h.html#a22dcd2b341c29891dff9485b33e4bc4b">FNTYPE</a> NMC_AxisJog </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a>&#160;</td>
          <td class="paramname"><em>DevID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a>&#160;</td>
          <td class="paramname"><em>AxisIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a>&#160;</td>
          <td class="paramname"><em>Dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nex__type_8h.html#a4f4dfa4a01521e3442b8afdbaf03b1bc">_opt_null_</a> const <a class="el" href="nex__type_8h.html#a1f25e16eef935edec602388b0ca299d9">F64_T</a> *&#160;</td>
          <td class="paramname"><em>PMaxVel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute Point-To-Point Motion according with target (or default) velocity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DevID</td><td>Device ID (DevID) </td></tr>
    <tr><td class="paramname">AxisIndex</td><td>Axis Index </td></tr>
    <tr><td class="paramname">Dir</td><td>Direction. 1:Forward, -1:Reverse </td></tr>
    <tr><td class="paramname">PMaxVel</td><td>Input target velocity with a pointer variable. Moreover, input 0 directly for no target velocity, and the driver will get the configuration in axis parameter <code>AXP_VM</code> as the target velocity.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return an <a class="el" href="group___error__code.html">error code</a>. <br />
 If the function is called successfully, the return value is ERR_NEXMOTION_SUCCESS (0). Otherwise, the return value is an error code. All error codes are defined in the header file, <a class="el" href="_nex_motion_error_8h.html" title="A head file define all of error codes for NexMotion Library. ">NexMotionError.h</a>.</dd></dl>
<p><b>Usage:</b> <br />
</p><ol type="1">
<li>The function can be called for point-to-point motion if the axis is excitation.</li>
<li>If the axis is homing, the function will return the error code.</li>
<li>If the axis is in the axis state <code>AXIS_STATE_STOPPING</code>, <code>AXIS_STATE_STOPPED</code> or <code>AXIS_STATE_ERROR</code>, the function will return the error code. After <a class="el" href="group___axis___state___control.html#gaba8b92334871fef6acd820a9d5f2f944" title="Reset the state of the axis. ">NMC_AxisResetState()</a> is called to reset the axis to normal excitation (<code>AXIS_STATE_STAND_STILL</code>), the function can be called for JOG motion successfully.</li>
<li>After the function is called, the drive will increase/decrease the velocity to the target velocity in accordance with the configuration in the axis parameter <code>AXP_ACC</code>, and the axis state will transfer to <code>AXIS_STATE_CONTINUOUS_MOTION</code>.</li>
<li>After the target velocity is input with the pointer variable PMaxVel, the axis parameter <code>AXP_VM</code> will be modified accordingly. The input target velocity can be 0.</li>
<li>After the function is called and the target velocity is reached, the bit 8 of the axis status becomes to 0, and the motion is continued at the target velocity.</li>
<li>If the axis is executing other motions, it will execute the corresponding behavior depended on the axis parameter <code>AXP_BUFF_PARAM</code> after the function is called.</li>
<li>After the function is called, <a class="el" href="group___axis___motion___termination.html#ga8a8dcc84ad8fce577adda96472ec963a" title="The function can be called to halt the axis motion. ">NMC_AxisHalt()</a> can be called to stop the motion.</li>
</ol>
<p><b>Examples:</b> <br />
 </p><div class="fragment"><div class="line"><a class="code" href="nex__type_8h.html#acbde565254657d16523ae08fccf48f88">RTN_ERR</a> ret = 0;</div><div class="line"><a class="code" href="nex__type_8h.html#a1f25e16eef935edec602388b0ca299d9">F64_T</a> maxVel = 100;</div><div class="line">ret = <a class="code" href="group___axis___motion___control.html#ga3e3f6d20ccba8a38390e2fa0d5cce921">NMC_AxisJog</a>( 0, 0, -1, &amp;maxVel ); <span class="comment">// Set the axis move reversely. Modify the axis parameter AXP_VM to 100 as the target velocity for the velocity plan.</span></div></div><!-- fragment --><p><b>Reference:</b> <br />
</p><ol type="1">
<li><a class="el" href="group___axis___config.html#ga94a3cbdb201b6ca4ceda37a2d51b3248" title="Set the axis parameters (I_32T data type) ">NMC_AxisSetParamI32()</a>, <a class="el" href="group___axis___config.html#gafd7bc83d7588333cf89521d9c7f260d5" title="Set the axis patameters (F64_T data type) ">NMC_AxisSetParamF64()</a></li>
<li><a class="el" href="group___axis___state___control.html#gaba8b92334871fef6acd820a9d5f2f944" title="Reset the state of the axis. ">NMC_AxisResetState()</a></li>
<li><a class="el" href="group___axis___state___control.html#ga56a5f113ce33401c3a4a36cc7bd39b26" title="Get the status of the axis. ">NMC_AxisGetStatus()</a></li>
<li><a class="el" href="group___axis___motion___termination.html#ga8a8dcc84ad8fce577adda96472ec963a" title="The function can be called to halt the axis motion. ">NMC_AxisHalt()</a> </li>
</ol>

</div>
</div>
<a class="anchor" id="ga551822a510ca3810e0924c44a7bc4049"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="nex__type_8h.html#acbde565254657d16523ae08fccf48f88">RTN_ERR</a> <a class="el" href="_nex_motion_8h.html#a22dcd2b341c29891dff9485b33e4bc4b">FNTYPE</a> NMC_AxisPtp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a>&#160;</td>
          <td class="paramname"><em>DevID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nex__type_8h.html#ad142680a6eacc0c8ff2d93192e7e45ef">I32_T</a>&#160;</td>
          <td class="paramname"><em>AxisIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nex__type_8h.html#a1f25e16eef935edec602388b0ca299d9">F64_T</a>&#160;</td>
          <td class="paramname"><em>TargetPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nex__type_8h.html#a4f4dfa4a01521e3442b8afdbaf03b1bc">_opt_null_</a> const <a class="el" href="nex__type_8h.html#a1f25e16eef935edec602388b0ca299d9">F64_T</a> *&#160;</td>
          <td class="paramname"><em>PMaxVel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute Point-To-Point Motion according with target position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DevID</td><td>Device ID (DevID) </td></tr>
    <tr><td class="paramname">AxisIndex</td><td>Axis index </td></tr>
    <tr><td class="paramname">TargetPos</td><td>Taget Position (Unit: user unit). The value will be interpreted to absolute or relative distance based on the axis parameter <code>0x30</code> (absolute or relative programming). </td></tr>
    <tr><td class="paramname">PMaxVel</td><td>Input the target velocity with a pointer variable. Moreover, input 0 directly for no target velocity, and the driver can plan the motion based on the velocity configuratio of the axis parameter <code>AXP_VM</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return an <a class="el" href="group___error__code.html">error code</a>. <br />
 If the function is called successfully, the return value is ERR_NEXMOTION_SUCCESS (0). Otherwise, the return value is an error code. All error codes are defined in the header file, <a class="el" href="_nex_motion_error_8h.html" title="A head file define all of error codes for NexMotion Library. ">NexMotionError.h</a>.</dd></dl>
<p><b>Usage:</b> <br />
</p><ol type="1">
<li>The function can be called for point-to-point motion if the axis is excitation.</li>
<li>If the axis is homing, the function will return the error code.</li>
<li>If the axis is in the <a class="el" href="group___axis___state___control.html#ga3eef125c27ec34d1a72f40579cd76d7d">axis state</a> AXIS_STATE_STOPPING, AXIS_STATE_STOPPED or AXIS_STATE_ERROR, the function will return the error code. After <a class="el" href="group___axis___state___control.html#gaba8b92334871fef6acd820a9d5f2f944" title="Reset the state of the axis. ">NMC_AxisResetState()</a> is called to reset the axis to normal excitation (AXIS_STATE_STAND_STILL), the function can be called for point-to-point motion successfully.</li>
<li>If the axis is executing other motions, it will execute the corresponding behavior depended on the axis parameter AXP_BUFF_PARAM after the function is called.</li>
<li>The function can be called to enable the point-to-point motion. After the motion completely, the axis will move to the input target position. If the axis parameter 0x30 (Absolute or relative programming) is set to 1, the target position and the relative distance from the current position shall be input in the function. If the relative distance is set to 0, the target position will be set as an absolute position.</li>
<li>If the axis is excuting the point-to-point motion, the <a class="el" href="group___axis___state___control.html#ga3eef125c27ec34d1a72f40579cd76d7d">axis state</a> will transfer to AXIS_STATE_DISCRETE_MOTION. After the axis moves to the target position and there is no successive motion, the bit 9 of axis status will become to 1, and the axis will transfer to the normal excitation (AXIS_STATE_STAND_STILL).</li>
<li>The drive will plan the velocity curve depended on the axis parameters, AXP_PROF_TYPE, AXP_ACC, AXP_DEC and AXP_JERK.</li>
<li>The maximum velocity can be input with the pointer variable, PMaxVel. Then the corresponding axis parameter AXP_VM will be modified to the input value, and the velocity plan will be performed accordingly.</li>
<li>If the pointer variable, PMaxVel, is set to 0, the drive will perform the velocity plan based on the axis parameter AXP_VM as the target velocity.</li>
<li>If the <a class="el" href="group___axis___state___control.html#ga3eef125c27ec34d1a72f40579cd76d7d">axis state</a> is AXIS_STATE_STAND_STILL, the function will enable the point-to-point motion immediately after called whether the content of axis parameter AXP_BUFF_PARAM.</li>
<li>After the function is called and if the <a class="el" href="group___axis___state___control.html#ga3eef125c27ec34d1a72f40579cd76d7d">axis state</a> is AXIS_STATE_WAIT_SYNC and the axis parameter AXP_BUFF_PARAM is aborting, the motions stored in the motion queue will be removed. Then the point-to-point motion will be stored into the motion queue and wait for trigger signal.</li>
<li>If the axis has not reach the target position during the point-to-point motion, <a class="el" href="group___axis___motion___termination.html#ga8a8dcc84ad8fce577adda96472ec963a" title="The function can be called to halt the axis motion. ">NMC_AxisHalt()</a> can be called to stop the motion.</li>
</ol>
<p><b>Examples:</b> <br />
 </p><div class="fragment"><div class="line"><a class="code" href="nex__type_8h.html#acbde565254657d16523ae08fccf48f88">RTN_ERR</a> ret = 0;</div><div class="line">ret = <a class="code" href="group___axis___motion___control.html#ga551822a510ca3810e0924c44a7bc4049">NMC_AxisPtp</a>( 0, 0, 100, 0 ) <span class="comment">// Plan the motion based on the velocity configuration of the axis parameter AXP_VM</span></div></div><!-- fragment --><p><b>Reference:</b> <br />
</p><ol type="1">
<li><a class="el" href="group___axis___config.html#ga94a3cbdb201b6ca4ceda37a2d51b3248" title="Set the axis parameters (I_32T data type) ">NMC_AxisSetParamI32()</a>, <a class="el" href="group___axis___config.html#gafd7bc83d7588333cf89521d9c7f260d5" title="Set the axis patameters (F64_T data type) ">NMC_AxisSetParamF64()</a></li>
<li><a class="el" href="group___axis___state___control.html#gaba8b92334871fef6acd820a9d5f2f944" title="Reset the state of the axis. ">NMC_AxisResetState()</a></li>
<li><a class="el" href="group___axis___state___control.html#ga56a5f113ce33401c3a4a36cc7bd39b26" title="Get the status of the axis. ">NMC_AxisGetStatus()</a></li>
<li><a class="el" href="group___axis___motion___termination.html#ga8a8dcc84ad8fce577adda96472ec963a" title="The function can be called to halt the axis motion. ">NMC_AxisHalt()</a> </li>
</ol>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
